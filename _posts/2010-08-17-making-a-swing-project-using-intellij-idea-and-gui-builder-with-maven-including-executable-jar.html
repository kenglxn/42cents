---
layout: post
title: Making a swing project using IntelliJ IDEA GUI builder with maven, Including
  executable jar
tags:
- idea
- intellij
- Java
- maven
- swing
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  _syntaxhighlighter_encoded: '1'
  _jd_tweet_this: ''
  _jd_twitter: ''
  _wp_jd_clig: ''
  _wp_jd_bitly: ''
  _wp_jd_wp: ''
  _wp_jd_yourls: ''
  _wp_jd_url: ''
  _wp_jd_target: ''
  _jd_wp_twitter: ''
  _jd_post_meta_fixed: 'true'
---
In this post I'll quickly show how to get a maven project under Idea running with the GUI builder, and show you the config you need to build an executable jar for it as well.

IntelliJ IDEA has a great built in tool for making swing projects called <a href="http://www.jetbrains.com/idea/features/gui_builder.html">GUI Builder</a>, here's a nice <a href="http://www.jetbrains.com/idea/training/demos/GUI_Designer/GUI_Designer.html">live demo</a>.

The problem comes when using the gui builder with maven, since the builder uses form files that are specific for IDEA. Thankfully there is a maven plugin to help with this issue: The <a href="http://mojo.codehaus.org/ideauidesigner-maven-plugin/">Maven 2 IDEA UI Designer Plugin</a>.

To have a concrete example to work with, we'll create a simple Swing app for sending JMS Messages to a destination queue. The code will be located at <a href="http://github.com/kenglxn/JMSUtility">http://github.com/kenglxn/JMSUtility</a>

So lets get started by setting up the project:
<ol>
	<li>Start IDEA and create a new project. Choose to create from scratch.
<a href="http://www.glxn.net/wp-content/uploads/2010/08/newproject.png"><img class="alignnone size-medium wp-image-303" title="newproject" src="http://www.glxn.net/wp-content/uploads/2010/08/newproject-300x235.png" alt="" width="300" height="235" /></a></li>
	<li>in the module section choose maven module and give it a name
<a href="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-New-Project-Maven-Module.png"><img class="alignnone size-medium wp-image-288" title="Screenshot-New Project-Maven-Module" src="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-New-Project-Maven-Module-300x235.png" alt="" width="300" height="235" /></a></li>
	<li>In the next screen you can set maven artifact properties and if you wish choose an archetype, we'll be creating from scratch, so skip the archetype and click the finish button
<a href="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-New-Project-Finish.png"><img class="alignnone size-medium wp-image-290" title="Screenshot-New Project-Finish" src="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-New-Project-Finish-300x235.png" alt="" width="300" height="235" /></a></li>
	<li><a href="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-New-Project-Finish.png"></a>Great, now we have a fresh maven project that we can work with
<a href="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-JMSUtility.png"><img class="alignnone size-medium wp-image-291" title="Screenshot-JMSUtility" src="http://www.glxn.net/wp-content/uploads/2010/08/Screenshot-JMSUtility-300x102.png" alt="" width="300" height="102" /></a></li>
</ol>
So now it's just a matter of adding the dependencies we need, and writing some code.  We'll add some dependencies for tests, string manipulation and JMS.
Here's a snippet of the dependencies added to the pom.xml so far:

[code lang="xml"]
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;commons-lang&lt;/groupId&gt;
        &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;
        &lt;version&gt;2.5&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.activemq&lt;/groupId&gt;
        &lt;artifactId&gt;activemq-core&lt;/artifactId&gt;
        &lt;version&gt;5.3.0&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;com.intellij&lt;/groupId&gt;
        &lt;artifactId&gt;forms_rt&lt;/artifactId&gt;
        &lt;version&gt;5.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- TEST SCOPE --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.7&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
[/code]

Next step is writing some code and tests.

We'll start off by making the UI using the built in <a title="IntelliJ IDEA GUI Builder" href="http://www.jetbrains.com/idea/features/gui_builder.html">GUI Builder</a> in IDEA, using the GridLayout. You could of course use JGoodies Forms layout, or even something else you prefer.
<ol>
	<li>create a new package, again I like to use alt+insert hotkey while the target directory is active. I chose net.glxn.jmsutility as the name for my package
<a href="http://www.glxn.net/wp-content/uploads/2010/08/newpackage.png"><img class="alignnone size-medium wp-image-320" title="newpackage" src="http://www.glxn.net/wp-content/uploads/2010/08/newpackage-300x231.png" alt="" width="300" height="231" />
</a><a href="http://www.glxn.net/wp-content/uploads/2010/08/packagename.png"><img class="alignnone size-medium wp-image-321" title="packagename" src="http://www.glxn.net/wp-content/uploads/2010/08/packagename-300x231.png" alt="" width="300" height="231" /></a></li>
	<li>Next we create a new GUI Form in the newly added package and give the form a name. Here I chose GridLayoutManager by IntelliJ, this will need to be added to the pom.
<a href="http://www.glxn.net/wp-content/uploads/2010/08/newguiform.png"><img class="alignnone size-medium wp-image-322" title="newguiform" src="http://www.glxn.net/wp-content/uploads/2010/08/newguiform-300x231.png" alt="" width="300" height="231" /></a>
<a href="http://www.glxn.net/wp-content/uploads/2010/08/newguiformname.png"><img class="alignnone size-medium wp-image-323" title="newguiformname" src="http://www.glxn.net/wp-content/uploads/2010/08/newguiformname-300x230.png" alt="" width="300" height="230" /></a></li>
	<li>IDEA now kindly shows us the fresh GUI builder view, here we add our components from the palette. Take a look at the <a href="http://www.jetbrains.com/idea/training/demos/GUI_Designer/GUI_Designer.html">live demo</a> of the GUI Builder to get started yourself.
<a href="http://www.glxn.net/wp-content/uploads/2010/08/guibuilder.png"><img class="alignnone size-medium wp-image-324" title="guibuilder" src="http://www.glxn.net/wp-content/uploads/2010/08/guibuilder-300x185.png" alt="" width="300" height="185" />
</a><a href="http://www.glxn.net/wp-content/uploads/2010/08/guibuilderitemsadded.png"><img class="alignnone size-medium wp-image-325" title="guibuilderitemsadded" src="http://www.glxn.net/wp-content/uploads/2010/08/guibuilderitemsadded-300x169.png" alt="" width="300" height="169" /></a></li>
	<li><a href="http://www.glxn.net/wp-content/uploads/2010/08/guibuilderitemsadded.png"></a>We now have enough code to run the application. commit:<a href="http://github.com/kenglxn/JMSUtility/commit/4164296182c8efc3f0c97be8f5be1a7a1f2cdeb3">4164296182c8efc3f0c97be8f5be1a7a1f2cdeb3
</a><a href="http://www.glxn.net/wp-content/uploads/2010/08/runclient.png"><img class="alignnone size-medium wp-image-336" title="runclient" src="http://www.glxn.net/wp-content/uploads/2010/08/runclient-300x228.png" alt="" width="300" height="228" /></a>
<a href="http://www.glxn.net/wp-content/uploads/2010/08/runclient2.png"><img class="alignnone size-medium wp-image-337" title="runclient2" src="http://www.glxn.net/wp-content/uploads/2010/08/runclient2-233x300.png" alt="" width="233" height="300" /></a></li>
	<li><a href="http://www.glxn.net/wp-content/uploads/2010/08/runclient2.png"></a>So now IDEA is able to run the GUI, and tests
<a href="http://www.glxn.net/wp-content/uploads/2010/08/testrun-idea.png"><img class="alignnone size-medium wp-image-338" title="testrun-idea" src="http://www.glxn.net/wp-content/uploads/2010/08/testrun-idea-300x206.png" alt="" width="300" height="206" /></a></li>
</ol>
That's it for the GUI building.
Our next step is to get this build running equally smooth in maven. Lets see what the output is with the current code (<a href="http://github.com/kenglxn/JMSUtility/tree/130462ca99bc7f05980fd129674d41ef975a5e92">http://github.com/kenglxn/JMSUtility/tree/130462ca99bc7f05980fd129674d41ef975a5e92</a>)
<a href="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-fail1.png"><img class="alignnone size-medium wp-image-339" title="maven-build-fail1" src="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-fail1-300x148.png" alt="" width="300" height="148" />
</a>So we see that maven isn't happy with us. Let's fix it by adding the following to the pom:

[code lang="xml"]
&lt;build&gt;
    &lt;finalName&gt;JMSUtil&lt;/finalName&gt;
    &lt;plugins&gt;

        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.0.2&lt;/version&gt;
            &lt;configuration&gt;
                &lt;sourcee&gt;1.6&lt;/sourcee&gt;
                &lt;target&gt;1.6&lt;/target&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;

    &lt;/plugins&gt;
&lt;/build&gt;
[/code]

Now we run the test again and get:
<a href="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-fail2.png"><img class="alignnone size-medium wp-image-340" title="maven-build-fail2" src="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-fail2-300x147.png" alt="" width="300" height="147" />
</a>Here we see that the build is ok, but the tests fail. This is what I was talking about earlier in regards to the idea forms not being built with maven.
Lets look at the surefire report and see what it says. I'm going to use the "analyze stacktrace" functionality in IDEA to get a pretty view of the content of the surefire report, since gedit isn't very helpful at that. To do this go to the Analyze menu and at the bottom select "Analyze stacktrace", and in the dialog paste in your stacktrace and click ok:
<a href="http://www.glxn.net/wp-content/uploads/2010/08/stacktrace-surefire.png"><img class="alignnone size-medium wp-image-341" title="stacktrace-surefire" src="http://www.glxn.net/wp-content/uploads/2010/08/stacktrace-surefire-300x150.png" alt="" width="300" height="150" />
</a>This tells us that the helpButton field is null when it tries to attach an ActionListener in the constructor

[code lang="java"]
public JMSUtility() {
    helpButton.addActionListener(new ActionListener() { ... }
[/code]

The way we solve this is to import the <a href="http://mojo.codehaus.org/ideauidesigner-maven-plugin/">Maven 2 IDEA UI Designer Plugin</a> into the pom:

[code lang="xml"]
&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;ideauidesigner-maven-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;javac2&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;

    &lt;configuration&gt;
        &lt;fork&gt;true&lt;/fork&gt;
        &lt;debug&gt;true&lt;/debug&gt;
        &lt;failOnError&gt;true&lt;/failOnError&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
[/code]

Let's see what the maven build does now by running clean install
<a href="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-success.png"><img class="alignnone size-medium wp-image-343" title="maven-build-success" src="http://www.glxn.net/wp-content/uploads/2010/08/maven-build-success-300x147.png" alt="" width="300" height="147" />
</a>How about that? The sweet taste of build success :)

This means now that the plugin is working. The next and final step is to create an executable jar via maven for this project. For this we will use the maven-jar-plugin to get a jar with the correct manifest and the maven-archive-plugin to get a lib directory with the dependencies in it which the manifest will refer to.
So, just add the following to the pom:
[code lang="xml"]
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;copy-dependencies&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;copy-dependencies&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;
                &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;
                &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;
                &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;


&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;archive&gt;
            &lt;manifest&gt;
                &lt;addClasspath&gt;true&lt;/addClasspath&gt;
                &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;
                &lt;mainClass&gt;net.glxn.jmsutility.JMSUtility&lt;/mainClass&gt;
            &lt;/manifest&gt;
        &lt;/archive&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
[/code]

At this point you should have a pom that looks like this: <a href="http://github.com/kenglxn/JMSUtility/blob/b217473ab420550ac81f149c2de22497e3bef303/pom.xml">http://github.com/kenglxn/JMSUtility/blob/b217473ab420550ac81f149c2de22497e3bef303/pom.xml
</a>Now let's run the executable jar by going to the target folder and running 'java -jar JMSUtil.jar'
<a href="http://www.glxn.net/wp-content/uploads/2010/08/run-executable-jar.png"><img class="alignnone size-medium wp-image-344" title="run-executable-jar" src="http://www.glxn.net/wp-content/uploads/2010/08/run-executable-jar-300x179.png" alt="" width="300" height="179" /></a>

And that's it. You now have a maven build with tests and automatic building of the executable jar.

Feel free to clone the code and do whatever you like with it, just dont blame me :P

The distribution zip with jar and lib can be downloaded directly here: <a href="http://github.com/kenglxn/JMSUtility/raw/master/dist/JMSUtility.zip">http://github.com/kenglxn/JMSUtility/raw/master/dist/JMSUtility.zip</a>

<strong>RESOURCES:</strong>
<a title="Maven Archiver" href="http://maven.apache.org/shared/maven-archiver/index.html"> http://maven.apache.org/shared/maven-archiver/index.html</a>
<a title="Maven 2 IDEA UI Designer Plugin" href="http://mojo.codehaus.org/ideauidesigner-maven-plugin/">http://mojo.codehaus.org/ideauidesigner-maven-plugin/</a>
<a title="Maven Dependency Plugin" href="http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html">http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html</a>
<a title="Forms RT jar on Maven Central repo" href="http://repo1.maven.org/maven2/com/intellij/forms_rt/">http://repo1.maven.org/maven2/com/intellij/forms_rt/</a>
<a title="GUI Builder for IntelliJ IDEA" href="http://www.jetbrains.com/idea/features/gui_builder.html">http://www.jetbrains.com/idea/features/gui_builder.html</a>
