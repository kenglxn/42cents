---
layout: post
title: Hosting maven artifact with github pages
tags:
- git
- github
- maven
status: publish
type: post
published: true
meta:
  _syntaxhighlighter_encoded: '1'
  _edit_last: '1'
  _jd_twitter: ''
  _jd_tweet_this: 'yes'
  _wp_jd_clig: ''
  _wp_jd_bitly: ''
  _wp_jd_wp: ''
  _wp_jd_yourls: ''
  _wp_jd_url: ''
  _wp_jd_target: http://www.glxn.net/?p=435
  _jd_wp_twitter: 'a:3:{i:0;s:60:"Hosting maven artifact with github pages http://goo.gl/dFhoy";i:1;s:60:"Hosting
    maven artifact with github pages http://goo.gl/dFhoy";i:2;s:80:"Hosting maven
    artifact with github pages http://goo.gl/dFhoy #git #github #maven";}'
  _jd_post_meta_fixed: 'true'
  _wp_jd_goo: http://goo.gl/dFhoy
---
Using the steps described in the Github pages doc: <a href="http://pages.github.com/">http://pages.github.com/</a> we will create a directory hosting our website and maven repository on github.

First we clone the project to a new directory that will be dedicated to the gh-pages content root branch.
(If you want to get fancy you can do subfolders for each of the root branches, but we'll not be doing that here.)
[code lang="bash"]
 ~ $ git clone git@github.com:kenglxn/QRGen.git QRGen_pages
 ~ $ cd QRGen_pages/
[/code]

To initialize the gh-pages branch do the following:
[code lang="bash"]
 ~/dev/git/QRGen_pages (master) $ git symbolic-ref HEAD refs/heads/gh-pages
 ~/dev/git/QRGen_pages (master) $ rm .git/index
 ~/dev/git/QRGen_pages (master) $ git clean -fdx
[/code]

You are now on the gh-pages branch will be hosted under your account e.g. (<a href="http://kenglxn.github.com/QRGen/">http://kenglxn.github.com/QRGen/</a>)
Here we can create a page with some content for the users of our project, and also host our project as a maven artifact.

To host our project as a maven artifact we need to deploy it to a folder under gh-pages directory.

Create repository folder.
[code lang="bash"]
 ~/dev/git/QRGen_pages (gh-pages) $ mkdir repository
[/code]

Add distributionManagement section to the project pom.xml with the full path to the repository folder
[code lang="bash"]
 ~/dev/git/QRGen_pages (gh-pages) $ cd ../QRGen
 ~/dev/git/QRGen_pages (gh-pages) $ vi pom.xml

    &lt;distributionManagement&gt;
        &lt;repository&gt;
            &lt;id&gt;gh-pages&lt;/id&gt;
            &lt;url&gt;file:///${basedir}/../QRGen_pages/repository/&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/distributionManagement&gt;
[/code]

At this point we can deploy the project with the following command
[code lang="bash"]
mvn clean deploy -DperformRelease=true
[/code]

Then we cd back to the gh-pages folder and check the result
[code lang="bash"]
 ~/dev/git/QRGen (master) $ cd -
/Users/kenglxn/dev/git/QRGen_pages
 ~/dev/git/QRGen_pages (gh-pages) $ ls -al repository/*/*/*
total 24
drwxr-xr-x   6 kenglxn  staff  204 Mar  6 15:06 .
drwxr-xr-x   3 kenglxn  staff  102 Mar  6 15:06 ..
drwxr-xr-x  14 kenglxn  staff  476 Mar  6 15:06 1.0
-rw-r--r--   1 kenglxn  staff  289 Mar  6 15:06 maven-metadata.xml
-rw-r--r--   1 kenglxn  staff   32 Mar  6 15:06 maven-metadata.xml.md5
-rw-r--r--   1 kenglxn  staff   40 Mar  6 15:06 maven-metadata.xml.sha1
[/code]

Everything looks as expected, now we add the repository folder to git, commit it, and push  to gh-pages
[code lang="bash"]
 ~/dev/git/QRGen_pages (gh-pages) $ git add repository
 ~/dev/git/QRGen_pages (gh-pages) $ git ci -m &quot;added repository folder with deployed artifact version 1.0&quot;
 ~/dev/git/QRGen_pages (gh-pages) $ git push origin gh-pages
[/code]

Our repository is now hosted on github and ready to use (e.g. http://kenglxn.github.com/QRGen/repository)
Keep in mind that gh-pages does not support directory listing, but this should not stop maven clients from getting the artifact.

Now people can use your project as a dependency. Following are examples of minimal project descriptors for gradle and maven
Gradle:
[code lang="groovy"]
group = 'net.glxn'
version = '1.0'
apply plugin: &quot;application&quot;
mainClassName = &quot;net.glxn.DepTest&quot;
repositories {
    mavenCentral()
    maven {
        url &quot;http://kenglxn.github.com/QRGen/repository&quot;
    }
}
dependencies {
    compile (&quot;net.glxn:qrgen:1.0&quot;)
}
[/code]

Maven pom.xml
[code lang="xml"]
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;net.glxn&lt;/groupId&gt;
  &lt;artifactId&gt;deptest&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;name&gt;qrgen-deptest&lt;/name&gt;

  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;net.glxn&lt;/groupId&gt;
      &lt;artifactId&gt;qrgen&lt;/artifactId&gt;
      &lt;version&gt;1.0&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;QRGen&lt;/id&gt;
      &lt;name&gt;QRGen Repo&lt;/name&gt;
      &lt;url&gt;http://kenglxn.github.com/QRGen/repository&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
&lt;/project&gt;

[/code]
